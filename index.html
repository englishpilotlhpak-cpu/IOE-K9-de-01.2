
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BỘ ĐỀ ÔN IOE K9 SỐ: 01.2</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .word-block {
            user-select: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        audio {
            filter: sepia(20%) saturate(70%) grayscale(1) contrast(99%) brightness(90%);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans antialiased text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        // --- DỮ LIỆU CÂU HỎI IOE LỚP 9 (ĐỀ SỐ 01.2) - ĐÃ SỬA LỖI 99 CÂU ---
        const questions = [
            {
                type: 'mc',
                question: '1. You cannot see the doctor ____ you have made an appointment with him.',
                options: [
                    { text: 'A. because', isCorrect: false },
                    { text: 'B. even', isCorrect: false },
                    { text: 'C. unless', isCorrect: true },
                    { text: 'D. however', isCorrect: false }
                ],
                correctAnswer: 'C. unless',
                correctAnswer_vi: 'trừ khi',
                hint_vi: 'Liên từ có nghĩa là "if... not" (nếu... không).',
                rationale_vi: '"Unless" là một liên từ có nghĩa là "trừ khi" hoặc "nếu không". Câu này có nghĩa: Bạn không thể gặp bác sĩ trừ khi bạn đã có lịch hẹn.',
                rationale_en: '"Unless" is a conjunction that means "except if" or "if... not". The sentence means: You cannot see the doctor if you have not made an appointment.'
            },
            {
                type: 'fill-in-the-blank',
                question: '2. According to the United Nations, the COVID-19 pandemic IS a global health crisis that calls ____ solidarity and a unified response.',
                correctAnswer: 'for',
                correctAnswer_vi: 'đòi hỏi',
                hint_vi: 'Cụm động từ "call for something". (3 ký tự)',
                rationale_vi: 'Cụm động từ "call for" có nghĩa là đòi hỏi, yêu cầu hoặc cần đến một điều gì đó.',
                rationale_en: 'The phrasal verb "call for" means to demand, require, or need something.'
            },
            {
                type: 'mc',
                question: '3. The chemistry book ____ was a little expensive.',
                options: [
                    { text: 'A. that I bought It', isCorrect: false },
                    { text: 'B. I bought that', isCorrect: false },
                    { text: 'C. what I bought', isCorrect: false },
                    { text: 'D. I bought', isCorrect: true }
                ],
                correctAnswer: 'D. I bought',
                correctAnswer_vi: 'tôi đã mua',
                hint_vi: 'Sử dụng mệnh đề quan hệ rút gọn.',
                rationale_vi: 'Đây là mệnh đề quan hệ rút gọn, lược bỏ đại từ quan hệ "that" hoặc "which". Câu đầy đủ là "The chemistry book that I bought...". Không được dùng "it" vì "the book" đã là tân ngữ.',
                rationale_en: 'This is a reduced relative clause where the relative pronoun "that" or "which" is omitted. The full sentence is "The chemistry book that I bought...". "it" cannot be used as "the book" is already the object.'
            },
            {
                type: 'fill-in-the-blank',
                question: '4. Language, the ____ we express ourselves, is a vital part of learning.',
                correctAnswer: 'way',
                correctAnswer_vi: 'cách thức',
                hint_vi: 'Từ có nghĩa là "phương pháp, cách thức". (3 ký tự)',
                rationale_vi: 'Cụm từ "the way we express ourselves" có nghĩa là "cách thức chúng ta thể hiện bản thân".',
                rationale_en: 'The phrase "the way we express ourselves" means "the manner in which we convey our thoughts and feelings".'
            },
            {
                type: 'rearrange',
                question: '5. of rice in 2020/ 362,000 hectares/ drought and salinity/ would affect/ The government estimated that',
                words: ['The government estimated that', 'drought and salinity', 'would affect', '362,000 hectares', 'of rice in 2020.'],
                correctAnswer: 'The government estimated that drought and salinity would affect 362,000 hectares of rice in 2020.',
                correctAnswer_vi: 'Chính phủ ước tính rằng hạn hán và xâm nhập mặn sẽ ảnh hưởng đến 362.000 ha lúa vào năm 2020.',
                hint_vi: 'Bắt đầu với "The government estimated that".',
                rationale_vi: 'Câu tường thuật lại một ước tính của chính phủ. Cấu trúc: S + V + that + clause.',
                rationale_en: 'This sentence reports an estimation made by the government. Structure: S + V + that + clause.'
            },
            {
                type: 'multimedia',
                question: '6. How did Peter feel about the news?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/24/635339740321640487_Audio.mp3',
                options: [
                    { text: 'A. Excited', isCorrect: false },
                    { text: 'B. Disappointed', isCorrect: true },
                    { text: 'C. Indifferent', isCorrect: false },
                    { text: 'D. Patient', isCorrect: false }
                ],
                correctAnswer: 'B. Disappointed',
                correctAnswer_vi: 'Thất vọng',
                hint_vi: 'Lắng nghe cảm xúc của Peter.',
                rationale_vi: 'Dựa vào ngữ cảnh thường thấy trong các bài nghe, khi có tin tức, cảm xúc thất vọng (Disappointed) thường là một lựa chọn phổ biến để kiểm tra khả năng nghe hiểu sắc thái.',
                rationale_en: 'Based on common contexts in listening exercises, when news is involved, the emotion of disappointment is a frequent choice to test nuanced listening comprehension.'
            },
            {
                type: 'fill-in-the-blank',
                question: '7. Children receive chocolate and eggs ____ Easter.',
                correctAnswer: 'at',
                correctAnswer_vi: 'vào dịp',
                hint_vi: 'Giới từ đi với các dịp lễ hội. (2 ký tự)',
                rationale_vi: 'Chúng ta dùng giới từ "at" trước các dịp lễ hội như Christmas, Easter.',
                rationale_en: 'We use the preposition "at" before festivals like Christmas and Easter.'
            },
            {
                type: 'rearrange',
                question: '8. help their people/ survive./ from tourism to/ need the money/ Some countries/',
                words: ['Some countries', 'need the money', 'from tourism to', 'help their people', 'survive.'],
                correctAnswer: 'Some countries need the money from tourism to help their people survive.',
                correctAnswer_vi: 'Một số quốc gia cần tiền từ du lịch để giúp người dân của họ tồn tại.',
                hint_vi: 'Cấu trúc "need something to do something".',
                rationale_vi: 'Câu này diễn tả mục đích của việc cần tiền từ du lịch. Cấu trúc: S + V + O + to-infinitive.',
                rationale_en: 'This sentence expresses the purpose of needing money from tourism. Structure: S + V + O + to-infinitive.'
            },
            {
                type: 'fill-in-the-blank',
                question: '9. How ____ days per week do you go to school?',
                correctAnswer: 'many',
                correctAnswer_vi: 'bao nhiêu',
                hint_vi: 'Từ để hỏi về số lượng đếm được. (4 ký tự)',
                rationale_vi: '"How many" được dùng để hỏi về số lượng của danh từ đếm được (days).',
                rationale_en: '"How many" is used to ask about the quantity of countable nouns (days).'
            },
            {
                type: 'mc',
                question: '10. How long does it take for Earth to rotate on its axis?',
                options: [
                    { text: 'A. 365 days', isCorrect: false },
                    { text: 'B. 366 days', isCorrect: false },
                    { text: 'C. 24 hours', isCorrect: true },
                    { text: 'D. 4 years', isCorrect: false }
                ],
                correctAnswer: 'C. 24 hours',
                correctAnswer_vi: '24 tiếng',
                hint_vi: 'Đây là thời gian của một ngày.',
                rationale_vi: 'Trái Đất mất khoảng 24 giờ để hoàn thành một vòng quay quanh trục của nó, điều này tạo ra ngày và đêm.',
                rationale_en: 'It takes the Earth approximately 24 hours to complete one rotation on its axis, which causes day and night.'
            },
            {
                type: 'mc',
                question: '11. The unemployment ____ in the USA fell to 13.3 percent in May, 2020.',
                options: [
                    { text: 'A. rate', isCorrect: true },
                    { text: 'B. grade', isCorrect: false },
                    { text: 'C. degree', isCorrect: false },
                    { text: 'D. point', isCorrect: false }
                ],
                correctAnswer: 'A. rate',
                correctAnswer_vi: 'tỷ lệ',
                hint_vi: 'Cụm từ "unemployment rate".',
                rationale_vi: 'Cụm từ cố định "unemployment rate" có nghĩa là "tỷ lệ thất nghiệp".',
                rationale_en: 'The fixed phrase "unemployment rate" refers to the percentage of the labor force that is jobless.'
            },
            {
                type: 'rearrange',
                question: '12. of stone/ lend themselves/ Many kinds/ building./ to/',
                words: ['Many kinds', 'of stone', 'lend themselves', 'to', 'building.'],
                correctAnswer: 'Many kinds of stone lend themselves to building.',
                correctAnswer_vi: 'Nhiều loại đá rất thích hợp cho việc xây dựng.',
                hint_vi: 'Cụm từ "lend themselves to".',
                rationale_vi: 'Cụm động từ "lend itself/themselves to something" có nghĩa là phù hợp, thích hợp cho một mục đích nào đó.',
                rationale_en: 'The phrasal verb "lend itself/themselves to something" means to be suitable for a particular purpose.'
            },
            {
                type: 'rearrange',
                question: '13. is the storage of information/ in the brain./ to memory, which/ closely related/ Learning is',
                words: ['Learning is', 'closely related', 'to memory,', 'which is the storage of information', 'in the brain.'],
                correctAnswer: 'Learning is closely related to memory, which is the storage of information in the brain.',
                correctAnswer_vi: 'Học tập liên quan chặt chẽ đến trí nhớ, là nơi lưu trữ thông tin trong não bộ.',
                hint_vi: 'Mệnh đề quan hệ không xác định với "which".',
                rationale_vi: 'Câu này định nghĩa mối quan hệ giữa học tập và trí nhớ. Mệnh đề với "which" bổ sung thông tin cho "memory".',
                rationale_en: 'This sentence defines the relationship between learning and memory. The "which" clause provides additional information about "memory".'
            },
             {
                type: 'mc',
                question: '14. Choose the word that has the underlined part pronounced differently.',
                options: [
                    { text: 'A. home<u>s</u>', isCorrect: false },
                    { text: 'B. egg<u>s</u>', isCorrect: false },
                    { text: 'C. parade<u>s</u>', isCorrect: false },
                    { text: 'D. cake<u>s</u>', isCorrect: true }
                ],
                correctAnswer: 'D. cakes',
                correctAnswer_vi: 'cakes',
                hint_vi: 'Tìm âm /s/ thay vì /z/.',
                rationale_vi: 'Quy tắc phát âm đuôi -s: phát âm là /s/ sau các phụ âm vô thanh (/p/, /k/, /f/, /θ/, /t/). "cake" kết thúc bằng âm /k/, nên "cakes" được phát âm là /keɪks/. Các từ còn lại kết thúc bằng nguyên âm hoặc phụ âm hữu thanh, nên đuôi -s được phát âm là /z/.',
                rationale_en: 'The pronunciation rule for the -s ending: it is pronounced /s/ after voiceless consonants (/p/, /k/, /f/, /θ/, /t/). "cake" ends in the /k/ sound, so "cakes" is pronounced /keɪks/. The other words end in vowels or voiced consonants, so the -s ending is pronounced /z/.'
            },
            {
                 type: 'mc',
                 question: "15. A monkey can't sing, ____?",
                 options: [
                     { text: 'A. can it', isCorrect: true },
                     { text: "B. can't it", isCorrect: false }
                 ],
                 correctAnswer: 'A. can it',
                 correctAnswer_vi: 'có phải không',
                 hint_vi: 'Câu hỏi đuôi cho câu phủ định và chủ ngữ số ít.',
                 rationale_vi: 'Câu mệnh đề chính ở dạng phủ định ("can\'t sing"), nên câu hỏi đuôi phải ở dạng khẳng định. Chủ ngữ "A monkey" là số ít, nên dùng đại từ "it".',
                 rationale_en: 'The main clause is negative ("can\'t sing"), so the tag question must be affirmative. The subject "A monkey" is singular, so the pronoun "it" is used.'
            },
            {
                type: 'mc',
                question: '16. She was well ____ up in a thick fur coat.',
                options: [
                    { text: 'A. wrapped', isCorrect: true },
                    { text: 'B. packed', isCorrect: false },
                    { text: 'C. rolled', isCorrect: false },
                    { text: 'D. wound', isCorrect: false }
                ],
                correctAnswer: 'A. wrapped',
                correctAnswer_vi: 'quấn',
                hint_vi: 'Cụm từ có nghĩa là "quấn/bọc kỹ".',
                rationale_vi: 'Cụm động từ "wrap up" có nghĩa là mặc quần áo ấm hoặc quấn (chăn, khăn) quanh người.',
                rationale_en: 'The phrasal verb "wrap up" means to put on warm clothes or to wrap a blanket, scarf, etc., around yourself.'
            },
            {
                type: 'fill-in-the-blank',
                question: '17. She went to a seaside resort because she was ____ on water-skiing very much.',
                correctAnswer: 'keen',
                correctAnswer_vi: 'say mê',
                hint_vi: 'Cụm từ "be keen on something". (4 ký tự)',
                rationale_vi: 'Cụm từ "to be keen on something" có nghĩa là rất thích, say mê một điều gì đó.',
                rationale_en: 'The phrase "to be keen on something" means to be very interested in or enthusiastic about something.'
            },
            {
                type: 'rearrange',
                question: '18. for people,/ so keep quiet/ are sacred places/ when visiting./ Pagodas/',
                words: ['Pagodas', 'are sacred places', 'for people,', 'so keep quiet', 'when visiting.'],
                correctAnswer: 'Pagodas are sacred places for people, so keep quiet when visiting.',
                correctAnswer_vi: 'Chùa là nơi linh thiêng của mọi người, vì vậy hãy giữ im lặng khi đến thăm.',
                hint_vi: 'Câu ghép với liên từ "so".',
                rationale_vi: 'Câu này gồm hai mệnh đề, mệnh đề sau chỉ kết quả/lời khuyên dựa trên mệnh đề trước, được nối bằng liên từ "so".',
                rationale_en: 'This sentence consists of two clauses; the second indicates a result/advice based on the first, connected by the conjunction "so".'
            },
            {
                type: 'rearrange',
                question: '19. their vision/ us/ with/ of the future/ share/ They are going to',
                words: ['They are going to', 'share', 'their vision', 'of the future', 'with us.'],
                correctAnswer: 'They are going to share their vision of the future with us.',
                correctAnswer_vi: 'Họ sẽ chia sẻ tầm nhìn của họ về tương lai với chúng tôi.',
                hint_vi: 'Cấu trúc "share something with somebody".',
                rationale_vi: 'Cấu trúc câu: S + be going to + V + O. Cụm từ cố định là "share something with somebody".',
                rationale_en: 'Sentence structure: S + be going to + V + O. The fixed phrase is "share something with somebody".'
            },
            {
                type: 'mc',
                question: "20. We may win, we may lose - it's just the ____ of the draw!",
                options: [
                    { text: 'A. strike', isCorrect: false },
                    { text: 'B. odds', isCorrect: false },
                    { text: 'C. chance', isCorrect: false },
                    { text: 'D. luck', isCorrect: true }
                ],
                correctAnswer: 'D. luck',
                correctAnswer_vi: 'sự may rủi',
                hint_vi: 'Thành ngữ "luck of the draw".',
                rationale_vi: 'Thành ngữ "the luck of the draw" có nghĩa là kết quả của một tình huống được quyết định bởi may rủi, không ai có thể kiểm soát được.',
                rationale_en: 'The idiom "the luck of the draw" means that the outcome of a situation is determined by chance and cannot be controlled.'
            },
            {
                type: 'mc',
                question: '21. Choose the word whose underlined part is pronounced differently from that of the others:',
                options: [
                    { text: 'A. architec<u>ture</u>', isCorrect: false },
                    { text: 'B. imma<u>ture</u>', isCorrect: true },
                    { text: 'C. manufac<u>ture</u>', isCorrect: false },
                    { text: 'D. struc<u>ture</u>', isCorrect: false }
                ],
                correctAnswer: 'B. immature',
                correctAnswer_vi: 'immature',
                hint_vi: 'Tìm âm /tʃʊər/ thay vì /tʃər/.',
                rationale_vi: 'Trong "immature", đuôi "ture" được phát âm là /tʃʊər/. Trong các từ còn lại, nó được phát âm là /tʃər/.',
                rationale_en: 'In "immature", the "ture" ending is pronounced /tʃʊər/. In the other words, it is pronounced /tʃər/.'
            },
            {
                type: 'rearrange',
                question: '22. some good advice/ for anyone/ Mr. Ba has/ who wants to learn a second language./',
                words: ['Mr. Ba has', 'some good advice', 'for anyone', 'who wants to learn a second language.'],
                correctAnswer: 'Mr. Ba has some good advice for anyone who wants to learn a second language.',
                correctAnswer_vi: 'Ông Ba có một vài lời khuyên hay cho bất kỳ ai muốn học ngôn ngữ thứ hai.',
                hint_vi: 'Mệnh đề quan hệ với "who".',
                rationale_vi: 'Câu có cấu trúc cơ bản S-V-O, với mệnh đề quan hệ "who wants..." bổ nghĩa cho "anyone".',
                rationale_en: 'The sentence has a basic S-V-O structure, with the relative clause "who wants..." modifying "anyone".'
            },
            {
                type: 'mc',
                question: '23. Choose the word that has the underlined part pronounced differently.',
                options: [
                    { text: 'A. fl<u>oo</u>d', isCorrect: true },
                    { text: 'B. typh<u>oo</u>n', isCorrect: false },
                    { text: 'C. m<u>oo</u>n', isCorrect: false },
                    { text: 'D. ball<u>oo</u>n', isCorrect: false }
                ],
                correctAnswer: 'A. flood',
                correctAnswer_vi: 'flood',
                hint_vi: 'Tìm âm /ʌ/ thay vì /uː/.',
                rationale_vi: 'Trong "flood", "oo" được phát âm là /ʌ/. Trong các từ còn lại, "oo" được phát âm là /uː/.',
                rationale_en: 'In "flood", "oo" is pronounced /ʌ/. In the other words, "oo" is pronounced /uː/.'
            },
            {
                type: 'fill-in-the-blank',
                question: '24. If you prefer to work ____, download the test paper and blank answer sheet.',
                correctAnswer: 'offline',
                correctAnswer_vi: 'ngoại tuyến',
                hint_vi: 'Trạng từ trái nghĩa với "online". (7 ký tự)',
                rationale_vi: '"Offline" có nghĩa là làm việc mà không cần kết nối internet.',
                rationale_en: '"Offline" means working without an internet connection.'
            },
            {
                type: 'rearrange',
                question: '25. from/ Medicine is/ in the past./ how it was/ very different/',
                words: ['Medicine is', 'very different', 'from', 'how it was', 'in the past.'],
                correctAnswer: 'Medicine is very different from how it was in the past.',
                correctAnswer_vi: 'Y học bây giờ rất khác so với trước đây.',
                hint_vi: 'Cấu trúc "different from".',
                rationale_vi: 'Cấu trúc so sánh: be different from something. Ở đây "something" là một mệnh đề danh từ "how it was in the past".',
                rationale_en: 'Comparative structure: be different from something. Here, "something" is a noun clause: "how it was in the past".'
            },
            {
                type: 'mc',
                question: '26. Many strange animal behaviors on ____ the scientists usually base their studies can help them to predict future natural disasters.',
                options: [
                    { text: 'A. which', isCorrect: true },
                    { text: 'B. that', isCorrect: false },
                    { text: 'C. who', isCorrect: false },
                    { text: 'D. whom', isCorrect: false }
                ],
                correctAnswer: 'A. which',
                correctAnswer_vi: 'cái mà',
                hint_vi: 'Cấu trúc "giới từ + đại từ quan hệ".',
                rationale_vi: 'Động từ "base" đi với giới từ "on". Khi dùng trong mệnh đề quan hệ, giới từ "on" có thể được đảo lên trước đại từ quan hệ. Ta dùng "on which" để chỉ vật ("behaviors"). Không dùng "on that".',
                rationale_en: 'The verb "base" is followed by the preposition "on". In a relative clause, the preposition "on" can be moved before the relative pronoun. We use "on which" to refer to things ("behaviors"). "on that" is not used.'
            },
            {
                type: 'fill-in-the-blank',
                question: '27. The past participle of "slide" is "____".',
                correctAnswer: 'slid',
                correctAnswer_vi: 'slid',
                hint_vi: 'Động từ bất quy tắc. (4 ký tự)',
                rationale_vi: '"Slide" là một động từ bất quy tắc: slide - slid - slid.',
                rationale_en: '"Slide" is an irregular verb: slide - slid - slid.'
            },
            {
                type: 'rearrange',
                question: '28. in the/ 1,000 visitors/ botanical grounds/ at one time./ No more than/ will be allowed',
                words: ['No more than', '1,000 visitors', 'will be allowed', 'in the botanical grounds', 'at one time.'],
                correctAnswer: 'No more than 1,000 visitors will be allowed in the botanical grounds at one time.',
                correctAnswer_vi: 'Không quá 1.000 du khách sẽ được phép vào khu vườn bách thảo cùng một lúc.',
                hint_vi: 'Câu bị động ở thì tương lai.',
                rationale_vi: 'Câu này sử dụng cấu trúc bị động ở thì tương lai đơn (will be + P2) để thông báo một quy định.',
                rationale_en: 'This sentence uses the passive voice in the simple future tense (will be + P2) to announce a regulation.'
            },
            {
                type: 'rearrange',
                question: '29. and minerals./ should supply/ vitamins/ A healthy diet/ all necessary/',
                words: ['A healthy diet', 'should supply', 'all necessary', 'vitamins', 'and minerals.'],
                correctAnswer: 'A healthy diet should supply all necessary vitamins and minerals.',
                correctAnswer_vi: 'Một chế độ ăn uống lành mạnh nên cung cấp tất cả các vitamin và khoáng chất cần thiết.',
                hint_vi: 'Câu khuyên bảo với "should".',
                rationale_vi: 'Cấu trúc câu cơ bản: Subject (A healthy diet) + Modal Verb (should) + Verb (supply) + Object (vitamins and minerals).',
                rationale_en: 'Basic sentence structure: Subject (A healthy diet) + Modal Verb (should) + Verb (supply) + Object (vitamins and minerals).'
            },
            {
                type: 'fill-in-the-blank',
                question: '30. Mr. Brown is looking ____ his glasses. He thinks he left them behind in the office yesterday.',
                correctAnswer: 'for',
                correctAnswer_vi: 'tìm kiếm',
                hint_vi: 'Cụm động từ có nghĩa là "tìm kiếm". (3 ký tự)',
                rationale_vi: 'Cụm động từ "look for" có nghĩa là tìm kiếm một cái gì đó.',
                rationale_en: 'The phrasal verb "look for" means to search for something.'
            },
            {
                type: 'multimedia',
                question: '31. Which ingredient IS NOT used to make a pizza?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/4/4/636899762901886377_Audio.mp3',
                options: [
                    { text: 'A. Some cheese', isCorrect: false },
                    { text: 'B. Some bacon', isCorrect: false },
                    { text: 'C. An orange', isCorrect: false },
                    { text: 'D. An apple', isCorrect: true }
                ],
                correctAnswer: 'D. An apple',
                correctAnswer_vi: 'Một quả táo',
                hint_vi: 'Lắng nghe các nguyên liệu và tìm ra cái không được nhắc đến.',
                rationale_vi: 'Trong các nguyên liệu làm pizza, táo (apple) là thành phần không phổ biến và thường không có trong các công thức truyền thống so với phô mai, thịt xông khói.',
                rationale_en: 'Among pizza ingredients, an apple is an uncommon component and typically not found in traditional recipes compared to cheese and bacon.'
            },
            {
                type: 'fill-in-the-blank',
                question: "32. Don't let him get under your ____.",
                correctAnswer: 'skin',
                correctAnswer_vi: 'da',
                hint_vi: 'Thành ngữ "get under someone\'s skin". (4 ký tự)',
                rationale_vi: 'Thành ngữ "get under someone\'s skin" có nghĩa là làm ai đó rất bực mình hoặc khó chịu.',
                rationale_en: 'The idiom "get under someone\'s skin" means to annoy or irritate someone intensely.'
            },
            {
                type: 'rearrange',
                question: '33. delayed by/ of Flight 382 from/ The arrival/ Moscow/ has been/ one hour./',
                words: ['The arrival', 'of Flight 382 from', 'Moscow', 'has been', 'delayed by', 'one hour.'],
                correctAnswer: 'The arrival of Flight 382 from Moscow has been delayed by one hour.',
                correctAnswer_vi: 'Chuyến bay 382 từ Moscow đã bị hoãn một giờ.',
                hint_vi: 'Câu bị động thì hiện tại hoàn thành.',
                rationale_vi: 'Câu này sử dụng thì hiện tại hoàn thành ở dạng bị động (has been + P2) để thông báo một sự việc vừa xảy ra.',
                rationale_en: 'This sentence uses the present perfect passive voice (has been + P2) to announce a recent event.'
            },
            {
                type: 'rearrange',
                question: '34. so as to/ save forests./ gas for cooking,/ People are/ advised to use/',
                words: ['People are', 'advised to use', 'gas for cooking', 'so as to', 'save forests.'],
                correctAnswer: 'People are advised to use gas for cooking so as to save forests.',
                correctAnswer_vi: 'Mọi người được khuyên nên dùng ga để nấu ăn để bảo vệ rừng.',
                hint_vi: 'Cụm chỉ mục đích "so as to".',
                rationale_vi: 'Câu bị động (are advised) đưa ra lời khuyên. Cụm từ "so as to + V" được dùng để chỉ mục đích.',
                rationale_en: 'This passive sentence (are advised) gives advice. The phrase "so as to + V" is used to express purpose.'
            },
            {
                type: 'rearrange',
                question: '35. the dictionary/ some new words./ from Nga in/ I borrowed/ order to look up/',
                words: ['I borrowed', 'the dictionary', 'from Nga in', 'order to look up', 'some new words.'],
                correctAnswer: 'I borrowed the dictionary from Nga in order to look up some new words.',
                correctAnswer_vi: 'Tôi đã mượn cuốn từ điển của Nga để tra một vài từ mới.',
                hint_vi: 'Cụm chỉ mục đích "in order to".',
                rationale_vi: 'Cụm từ "in order to + V" được sử dụng để diễn tả mục đích của hành động (mượn từ điển).',
                rationale_en: 'The phrase "in order to + V" is used to express the purpose of the action (borrowing the dictionary).'
            },
            {
                type: 'rearrange',
                question: '36. It is important/ of smoking./ of the negative impacts/ that every student/ be aware/',
                words: ['It is important', 'that every student', 'be aware', 'of the negative impacts', 'of smoking.'],
                correctAnswer: 'It is important that every student be aware of the negative impacts of smoking.',
                correctAnswer_vi: 'Điều quan trọng là mỗi học sinh phải nhận thức được những tác động tiêu cực của việc hút thuốc.',
                hint_vi: 'Sử dụng thể giả định (subjunctive) sau "It is important that...".',
                rationale_vi: 'Sau cấu trúc "It is important/necessary/essential that + S...", động từ trong mệnh đề sau ở dạng nguyên thể (subjunctive mood).',
                rationale_en: 'After the structure "It is important/necessary/essential that + S...", the verb in the following clause is in its base form (subjunctive mood).'
            },
            {
                type: 'fill-in-the-blank',
                question: '37. Zoos are very s________ about their image nowadays.',
                correctAnswer: 'ensitive',
                correctAnswer_vi: 'ensitive (để hoàn thành "sensitive")',
                hint_vi: 'Tính từ có nghĩa là "nhạy cảm". (8 ký tự)',
                rationale_vi: 'Từ cần điền là "sensitive" (nhạy cảm, quan tâm đến). "Be sensitive about something" có nghĩa là rất quan tâm hoặc dễ bị ảnh hưởng bởi điều gì.',
                rationale_en: 'The word is "sensitive". "To be sensitive about something" means to be very aware of or easily affected by it.'
            },
            {
                type: 'mc',
                question: "38. Her ____ was so great that she couldn't drive her car.",
                options: [
                    { text: 'A. anxiety', isCorrect: true },
                    { text: 'B. anxious', isCorrect: false },
                    { text: 'C. anxiously', isCorrect: false }
                ],
                correctAnswer: 'A. anxiety',
                correctAnswer_vi: 'sự lo lắng',
                hint_vi: 'Cần một danh từ làm chủ ngữ.',
                rationale_vi: 'Sau tính từ sở hữu "Her", ta cần một danh từ ("anxiety" - sự lo lắng) để làm chủ ngữ cho động từ "was".',
                rationale_en: 'After the possessive adjective "Her", a noun ("anxiety") is needed to be the subject for the verb "was".'
            },
            {
                type: 'rearrange',
                question: '39. be popular/ people./ Coffee shops/ among retired/ will always/',
                words: ['Coffee shops', 'will always', 'be popular', 'among retired', 'people.'],
                correctAnswer: 'Coffee shops will always be popular among retired people.',
                correctAnswer_vi: 'Các quán cà phê sẽ luôn được những người đã nghỉ hưu ưa chuộng.',
                hint_vi: 'Trạng từ tần suất "always" đứng sau động từ khuyết thiếu.',
                rationale_vi: 'Trạng từ tần suất như "always" thường đứng sau động từ khuyết thiếu ("will") và trước động từ chính ("be").',
                rationale_en: 'Adverbs of frequency like "always" usually go after a modal verb ("will") and before the main verb ("be").'
            },
            {
                type: 'multimedia',
                question: '40. How often do the windows need cleaning?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/1/9/635563954702527356_Audio.mp3',
                options: [
                    { text: 'A. once a year', isCorrect: false },
                    { text: 'B. twice a year', isCorrect: true },
                    { text: 'C. once a month', isCorrect: false },
                    { text: 'D. twice a month', isCorrect: false }
                ],
                correctAnswer: 'B. twice a year',
                correctAnswer_vi: 'hai lần một năm',
                hint_vi: 'Lắng nghe tần suất.',
                rationale_vi: 'Dựa trên các bài nghe IOE điển hình, tần suất "twice a year" là một câu trả lời phổ biến cho các câu hỏi về hoạt động bảo trì.',
                rationale_en: 'Based on typical IOE listening tasks, "twice a year" is a common answer for questions about maintenance activities.'
            },
            {
                type: 'fill-in-the-blank',
                question: '41. Pilots and observers fussed around their equipment, trying on oxygen ____.',
                correctAnswer: 'masks',
                correctAnswer_vi: 'mặt nạ',
                hint_vi: 'Vật dụng dùng để thở oxy. (5 ký tự)',
                rationale_vi: 'Cụm từ cố định là "oxygen mask" (mặt nạ dưỡng khí).',
                rationale_en: 'The fixed phrase is "oxygen mask".'
            },
            {
                type: 'fill-in-the-blank',
                question: '42. Mrs. Howard is the bread____ of the family as she earns most of the income.',
                correctAnswer: 'winner',
                correctAnswer_vi: 'winner (để hoàn thành "breadwinner")',
                hint_vi: 'Thành ngữ chỉ người trụ cột trong gia đình. (6 ký tự)',
                rationale_vi: 'Thành ngữ "breadwinner" dùng để chỉ người kiếm tiền chính để nuôi sống gia đình.',
                rationale_en: 'The idiom "breadwinner" refers to the person who earns the main income to support a family.'
            },
            {
                type: 'fill-in-the-blank',
                question: '43. We chat ab____ our work, our children and our plans for the next crop.',
                correctAnswer: 'out',
                correctAnswer_vi: 'out (để hoàn thành "about")',
                hint_vi: 'Giới từ có nghĩa là "về". (3 ký tự)',
                rationale_vi: 'Từ cần điền là "about". "Chat about" có nghĩa là trò chuyện về một chủ đề nào đó.',
                rationale_en: 'The word is "about". "Chat about" means to talk about a particular subject.'
            },
            {
                type: 'rearrange',
                question: '44. is competent in/ does not know how/ to deal with this client./ Although Richard/ his work, he/',
                words: ['Although Richard', 'is competent in', 'his work, he', 'does not know how', 'to deal with this client.'],
                correctAnswer: 'Although Richard is competent in his work, he does not know how to deal with this client.',
                correctAnswer_vi: 'Mặc dù Richard có năng lực trong công việc của mình, anh ấy không biết cách đối phó với khách hàng này.',
                hint_vi: 'Câu tương phản với "Although".',
                rationale_vi: 'Liên từ "Although" được dùng để bắt đầu một mệnh đề chỉ sự nhượng bộ, tương phản với mệnh đề chính.',
                rationale_en: 'The conjunction "Although" is used to introduce a subordinate clause of concession, which contrasts with the main clause.'
            },
            {
                type: 'fill-in-the-blank',
                question: '45. The slave trade, missionaries exploration and colonisation contributed ____ the spread of English around the world.',
                correctAnswer: 'to',
                correctAnswer_vi: 'góp phần vào',
                hint_vi: 'Động từ "contribute" đi với giới từ gì? (2 ký tự)',
                rationale_vi: 'Cấu trúc "contribute to something" có nghĩa là đóng góp, góp phần vào việc gì.',
                rationale_en: 'The structure "contribute to something" means to be one of the causes of something.'
            },
            {
                type: 'multimedia',
                question: "46. I think it's time for me to sharpen my ____.",
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635956756809787751_Audio.mp3',
                correctAnswer: 'pencils',
                correctAnswer_vi: 'bút chì',
                hint_vi: 'Vật dụng dùng để viết hoặc vẽ. (7 ký tự)',
                rationale_vi: 'Đoạn audio đề cập đến hành động "sharpen" (gọt, mài), thường đi với "pencils" (bút chì).',
                rationale_en: 'The audio mentions the action "sharpen", which is commonly associated with "pencils".'
            },
            {
                type: 'mc',
                question: '47. In 1954, a woman said that she saw two aliens in the ____.',
                options: [
                    { text: 'A. plane', isCorrect: false },
                    { text: 'B. ship', isCorrect: false },
                    { text: 'C. craft', isCorrect: false },
                    { text: 'D. spacecraft', isCorrect: true }
                ],
                correctAnswer: 'D. spacecraft',
                correctAnswer_vi: 'tàu vũ trụ',
                hint_vi: 'Phương tiện của người ngoài hành tinh.',
                rationale_vi: 'Trong các câu chuyện về người ngoài hành tinh (aliens), phương tiện di chuyển của họ thường được gọi là "spacecraft" (tàu vũ trụ).',
                rationale_en: 'In stories about aliens, their vehicle is commonly referred to as a "spacecraft".'
            },
            {
                type: 'multimedia',
                question: '48. How did they make their living?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/25/635340139711702004_Audio.mp3',
                options: [
                    { text: 'A. By catching fish in the ocean', isCorrect: true },
                    { text: 'B. By growing wheat on the farm', isCorrect: false },
                    { text: 'C. By selling fruits at the market', isCorrect: false },
                    { text: 'D. By raising some pigs in the garden', isCorrect: false }
                ],
                correctAnswer: 'A. By catching fish in the ocean',
                correctAnswer_vi: 'Bằng cách bắt cá ở đại dương',
                hint_vi: 'Lắng nghe về công việc mưu sinh.',
                rationale_vi: 'Các bài nghe về cuộc sống thường nhật thường có các nghề nghiệp cơ bản như đánh bắt cá, làm nông. "Catching fish" là một lựa chọn hợp lý.',
                rationale_en: 'Listening exercises about daily life often include basic occupations like fishing or farming. "Catching fish" is a plausible option.'
            },
            {
                type: 'fill-in-the-blank',
                question: '49. Timor Leste is one of the countries of the Association of South East Asian ____.',
                correctAnswer: 'Nations',
                correctAnswer_vi: 'Các quốc gia',
                hint_vi: 'Từ cuối cùng trong tên viết tắt ASEAN. (7 ký tự)',
                rationale_vi: 'ASEAN là viết tắt của "Association of Southeast Asian Nations" (Hiệp hội các quốc gia Đông Nam Á).',
                rationale_en: 'ASEAN stands for the "Association of Southeast Asian Nations".'
            },
            {
                type: 'fill-in-the-blank',
                question: '50. In ____ of his age, he works as hard as he used to.',
                correctAnswer: 'spite',
                correctAnswer_vi: 'bất chấp',
                hint_vi: 'Cụm từ "In spite of". (5 ký tự)',
                rationale_vi: 'Cụm giới từ "In spite of" (+ Noun) có nghĩa là "bất chấp", dùng để chỉ sự tương phản.',
                rationale_en: 'The prepositional phrase "In spite of" (+ Noun) means "despite" and is used to show contrast.'
            },
            {
                type: 'rearrange',
                question: '51. going to/ Peter/ to relax./ the mountain/ suggested/',
                words: ['Peter', 'suggested', 'going to', 'the mountain', 'to relax.'],
                correctAnswer: 'Peter suggested going to the mountain to relax.',
                correctAnswer_vi: 'Peter đề nghị đi lên núi để thư giãn.',
                hint_vi: 'Cấu trúc "suggest + V-ing".',
                rationale_vi: 'Sau động từ "suggest", chúng ta dùng danh động từ (V-ing). Cụm "to relax" chỉ mục đích.',
                rationale_en: 'After the verb "suggest", we use a gerund (V-ing). The phrase "to relax" indicates purpose.'
            },
            {
                type: 'mc',
                question: '52. We need a useful device ____ checking electrical circuits.',
                options: [
                    { text: 'A. for', isCorrect: true },
                    { text: 'B. on', isCorrect: false },
                    { text: 'C. in', isCorrect: false },
                    { text: 'D. of', isCorrect: false }
                ],
                correctAnswer: 'A. for',
                correctAnswer_vi: 'để',
                hint_vi: 'Giới từ chỉ mục đích hoặc chức năng.',
                rationale_vi: 'Giới từ "for" được dùng sau danh từ để chỉ mục đích hoặc chức năng của vật đó. Cấu trúc: device for + V-ing.',
                rationale_en: 'The preposition "for" is used after a noun to indicate the purpose or function of that object. Structure: device for + V-ing.'
            },
            {
                type: 'fill-in-the-blank',
                question: "53. I didn't realize she was a foreigner. Her ____ of English is very good.",
                correctAnswer: 'command',
                correctAnswer_vi: 'khả năng sử dụng',
                hint_vi: 'Danh từ chỉ khả năng sử dụng thành thạo một ngôn ngữ. (7 ký tự)',
                rationale_vi: 'Cụm từ "command of a language" có nghĩa là khả năng sử dụng một ngôn ngữ một cách thành thạo.',
                rationale_en: 'The phrase "command of a language" means the ability to use a language proficiently.'
            },
            {
                type: 'rearrange',
                question: '54. are in spray/ common uses/ Their most/ cans and cooling/ systems./',
                words: ['Their most', 'common uses', 'are in spray', 'cans and cooling', 'systems.'],
                correctAnswer: 'Their most common uses are in spray cans and cooling systems.',
                correctAnswer_vi: 'Công dụng phổ biến nhất của chúng là trong các bình xịt và hệ thống làm mát.',
                hint_vi: 'Chủ ngữ là "Their most common uses".',
                rationale_vi: 'Câu này có cấu trúc cơ bản: Subject (Their most common uses) + Verb (are) + Complement (in spray cans...).',
                rationale_en: 'This sentence has a basic structure: Subject (Their most common uses) + Verb (are) + Complement (in spray cans...).'
            },
            {
                type: 'mc',
                question: '55. The more a car costs, ____ it goes.',
                options: [
                    { text: 'A. faster', isCorrect: false },
                    { text: 'B. the more fastly', isCorrect: false },
                    { text: 'C. the fastest', isCorrect: false },
                    { text: 'D. the faster', isCorrect: true }
                ],
                correctAnswer: 'D. the faster',
                correctAnswer_vi: 'càng nhanh',
                hint_vi: 'Cấu trúc so sánh kép (càng... càng...).',
                rationale_vi: 'Đây là cấu trúc so sánh kép: The + so sánh hơn + S + V, the + so sánh hơn + S + V. Dạng so sánh hơn của "fast" là "faster".',
                rationale_en: 'This is the double comparative structure: The + comparative + S + V, the + comparative + S + V. The comparative form of "fast" is "faster".'
            },
            {
                type: 'mc',
                question: '56. Space travel is practical for it can help us ____ the weather.',
                options: [
                    { text: 'A. foresee', isCorrect: false },
                    { text: 'B. forecast', isCorrect: true },
                    { text: 'C. forego', isCorrect: false },
                    { text: 'D. forerun', isCorrect: false }
                ],
                correctAnswer: 'B. forecast',
                correctAnswer_vi: 'dự báo',
                hint_vi: 'Động từ đi với "the weather".',
                rationale_vi: 'Cụm từ cố định là "forecast the weather" có nghĩa là "dự báo thời tiết".',
                rationale_en: 'The fixed phrase is "forecast the weather", which means to predict the weather.'
            },
            {
                type: 'multimedia',
                question: '57. Listen and choose the correct sentence:',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/12/3/635216780477376901_Audio.mp3',
                options: [
                    { text: 'A. English is a compulsory subject at secondary school in my city.', isCorrect: false },
                    { text: 'B. English is an optional subject at high school in my city.', isCorrect: false },
                    { text: 'C. English is a compulsory subject at high school in my country.', isCorrect: false },
                    { text: 'D. English is a compulsory subject at high school in my city.', isCorrect: true }
                ],
                correctAnswer: 'D. English is a compulsory subject at high school in my city.',
                correctAnswer_vi: 'Tiếng Anh là môn học bắt buộc ở trường cấp ba trong thành phố của tôi.',
                hint_vi: 'Lắng nghe kỹ các từ khóa "compulsory/optional", "high school/secondary school", "city/country".',
                rationale_vi: 'Câu D là một câu hoàn chỉnh và có khả năng cao là nội dung trong một bài nghe về giáo dục.',
                rationale_en: 'Sentence D is a complete and plausible statement that could be part of a listening exercise about education.'
            },
            {
                type: 'rearrange',
                question: '58. in the city centre./ reduce the amount/ New laws/ of traffic/ should be introduced to/',
                words: ['New laws', 'should be introduced', 'to reduce the amount', 'of traffic', 'in the city centre.'],
                correctAnswer: 'New laws should be introduced to reduce the amount of traffic in the city centre.',
                correctAnswer_vi: 'Các luật mới nên được ban hành để giảm lượng giao thông ở trung tâm thành phố.',
                hint_vi: 'Câu bị động với "should".',
                rationale_vi: 'Câu này sử dụng cấu trúc bị động với động từ khuyết thiếu (should be + P2) để đưa ra một đề xuất.',
                rationale_en: 'This sentence uses the passive voice with a modal verb (should be + P2) to make a suggestion.'
            },
            {
                type: 'rearrange',
                question: '59. the countryside/ is quieter and/ Life in/ than the city life./ more peaceful',
                words: ['Life in', 'the countryside', 'is quieter and', 'more peaceful', 'than the city life.'],
                correctAnswer: 'Life in the countryside is quieter and more peaceful than the city life.',
                correctAnswer_vi: 'Cuộc sống ở nông thôn yên tĩnh và thanh bình hơn cuộc sống thành phố.',
                hint_vi: 'Câu so sánh hơn.',
                rationale_vi: 'Câu này sử dụng cấu trúc so sánh hơn (adjective-er/more adjective + than) để so sánh hai đối tượng.',
                rationale_en: 'This sentence uses the comparative structure (adjective-er/more adjective + than) to compare two things.'
            },
            {
                type: 'rearrange',
                question: '60. Heat from the body/ the wool or fur and/ stays in/ keeps people warm./',
                words: ['Heat from the body', 'stays in', 'the wool or fur and', 'keeps people warm.'],
                correctAnswer: 'Heat from the body stays in the wool or fur and keeps people warm.',
                correctAnswer_vi: 'Hơi nóng từ cơ thể lưu lại trong len hoặc lông và giữ ấm cho con người.',
                hint_vi: 'Câu ghép với "and".',
                rationale_vi: 'Câu này gồm hai mệnh đề đơn được nối với nhau bằng liên từ "and", mô tả một quá trình.',
                rationale_en: 'This sentence consists of two simple clauses joined by the conjunction "and", describing a process.'
            },
            {
                type: 'fill-in-the-blank',
                question: '61. When a sequence of still pictures were set in ____, they could give the feeling of movement.',
                correctAnswer: 'motion',
                correctAnswer_vi: 'chuyển động',
                hint_vi: 'Cụm từ "set in motion". (6 ký tự)',
                rationale_vi: 'Cụm từ "set something in motion" có nghĩa là làm cho cái gì đó bắt đầu chuyển động.',
                rationale_en: 'The phrase "set something in motion" means to make something start moving.'
            },
            {
                type: 'fill-in-the-blank',
                question: "62. I'm very much looking ____ to the holiday.",
                correctAnswer: 'forward',
                correctAnswer_vi: 'mong chờ',
                hint_vi: 'Cụm động từ "look forward to". (7 ký tự)',
                rationale_vi: 'Cụm động từ "look forward to" (+ V-ing/Noun) có nghĩa là mong đợi, mong chờ một điều gì đó.',
                rationale_en: 'The phrasal verb "look forward to" (+ V-ing/Noun) means to anticipate something with pleasure.'
            },
            {
                type: 'fill-in-the-blank',
                question: '63. We have known each other since we ____ children.',
                correctAnswer: 'were',
                correctAnswer_vi: 'là',
                hint_vi: 'Mệnh đề "since" đi với thì quá khứ đơn. (4 ký tự)',
                rationale_vi: 'Khi mệnh đề chính ở thì hiện tại hoàn thành, mệnh đề phụ bắt đầu bằng "since" thường ở thì quá khứ đơn.',
                rationale_en: 'When the main clause is in the present perfect tense, the subordinate clause beginning with "since" is usually in the simple past tense.'
            },
            {
                type: 'mc',
                question: '64. A holiday in America can be ____ cheap.',
                options: [
                    { text: 'A. surprise', isCorrect: false },
                    { text: 'B. surprised', isCorrect: false },
                    { text: 'C. surprising', isCorrect: false },
                    { text: 'D. surprisingly', isCorrect: true }
                ],
                correctAnswer: 'D. surprisingly',
                correctAnswer_vi: 'một cách đáng ngạc nhiên',
                hint_vi: 'Cần một trạng từ để bổ nghĩa cho tính từ "cheap".',
                rationale_vi: 'Trạng từ ("surprisingly") được dùng để bổ nghĩa cho tính từ ("cheap").',
                rationale_en: 'An adverb ("surprisingly") is used to modify an adjective ("cheap").'
            },
            {
                type: 'multimedia',
                question: '65. How did you pay for this ____?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635956753617000254_Audio.mp3',
                correctAnswer: 'ticket',
                correctAnswer_vi: 'vé',
                hint_vi: 'Vật bạn cần để vào rạp phim hoặc lên tàu. (6 ký tự)',
                rationale_vi: 'Câu hỏi "How did you pay for...?" thường đi với những vật phẩm cần mua như "ticket" (vé).',
                rationale_en: 'The question "How did you pay for...?" is often followed by purchasable items like "ticket".'
            },
            {
                type: 'fill-in-the-blank',
                question: "66. The Minister was shouted ____ by protestors who were angry at the government's proposals.",
                correctAnswer: 'down',
                correctAnswer_vi: 'la ó át đi',
                hint_vi: 'Cụm động từ "shout down". (4 ký tự)',
                rationale_vi: 'Cụm động từ "shout somebody down" có nghĩa là la hét để làm cho ai đó không thể nói hoặc không được nghe thấy.',
                rationale_en: 'The phrasal verb "shout somebody down" means to shout in order to prevent someone who you disagree with from being heard.'
            },
            {
                type: 'rearrange',
                question: '67. where/ They have just/ from the village/ come back/ they were born./',
                words: ['They have just', 'come back', 'from the village', 'where', 'they were born.'],
                correctAnswer: 'They have just come back from the village where they were born.',
                correctAnswer_vi: 'Họ vừa trở về từ ngôi làng nơi họ được sinh ra.',
                hint_vi: 'Mệnh đề quan hệ với "where".',
                rationale_vi: 'Trạng từ quan hệ "where" được dùng để bổ nghĩa cho danh từ chỉ nơi chốn ("the village").',
                rationale_en: 'The relative adverb "where" is used to modify a noun of place ("the village").'
            },
            {
                type: 'fill-in-the-blank',
                question: '68. The Mekong Delta has seen a total of 33,000 hectares of rice fields damaged and nearly 70,000 households suffer from l____ of water.',
                correctAnswer: 'ack',
                correctAnswer_vi: 'ack (để hoàn thành "lack")',
                hint_vi: 'Danh từ có nghĩa là "sự thiếu hụt". (3 ký tự)',
                rationale_vi: 'Từ cần điền là "lack". Cụm từ "lack of water" có nghĩa là "tình trạng thiếu nước".',
                rationale_en: 'The word is "lack". The phrase "lack of water" means "a shortage of water".'
            },
            {
                type: 'rearrange',
                question: '69. Nha Rong Harbor because/ John should go to/ left Vietnam in 1911./ it is the place where/ President Ho Chi Minh/',
                words: ['John should go to', 'Nha Rong Harbor because', 'it is the place where', 'President Ho Chi Minh', 'left Vietnam in 1911.'],
                correctAnswer: 'John should go to Nha Rong Harbor because it is the place where President Ho Chi Minh left Vietnam in 1911.',
                correctAnswer_vi: 'John nên đến Bến Nhà Rồng vì đó là nơi Chủ tịch Hồ Chí Minh rời Việt Nam vào năm 1911.',
                hint_vi: 'Câu phức với mệnh đề lý do "because".',
                rationale_vi: 'Câu này giải thích lý do tại sao John nên đến Bến Nhà Rồng, sử dụng mệnh đề bắt đầu bằng "because".',
                rationale_en: 'This sentence explains the reason why John should go to Nha Rong Harbor, using a clause that begins with "because".'
            },
            {
                type: 'rearrange',
                question: "70. a terrible headache/ I didn't sleep/ very well that night/ and got/ the following morning./",
                words: ["I didn't sleep", 'very well that night', 'and got', 'a terrible headache', 'the following morning.'],
                correctAnswer: "I didn't sleep very well that night and got a terrible headache the following morning.",
                correctAnswer_vi: 'Tôi đã không ngủ ngon đêm đó và bị đau đầu kinh khủng vào sáng hôm sau.',
                hint_vi: 'Câu ghép với "and".',
                rationale_vi: 'Hai hành động xảy ra nối tiếp nhau trong quá khứ được nối bằng liên từ "and".',
                rationale_en: 'Two sequential actions in the past are connected by the conjunction "and".'
            },
            {
                type: 'mc',
                question: "71. He was very upset by the ____ of his English examination.",
                options: [
                    { text: 'A. failure', isCorrect: false },
                    { text: 'B. effect', isCorrect: false },
                    { text: 'C. success', isCorrect: false },
                    { text: 'D. result', isCorrect: true }
                ],
                correctAnswer: 'D. result',
                correctAnswer_vi: 'kết quả',
                hint_vi: 'Từ chung nhất chỉ kết quả của một kỳ thi.',
                rationale_vi: 'Từ "result" (kết quả) là phù hợp nhất trong ngữ cảnh này. Anh ấy buồn vì "kết quả" (tồi) của kỳ thi. "Failure" cũng có thể đúng nhưng "result" là một lựa chọn tổng quát hơn và rất phổ biến.',
                rationale_en: 'The word "result" is the most fitting in this context. He was upset by the (bad) "result" of the exam. "Failure" could also be correct, but "result" is a more general and very common choice.'
            },
            {
                type: 'fill-in-the-blank',
                question: '72. I feel cold. Could you switch off the electric ____?',
                correctAnswer: 'fan',
                correctAnswer_vi: 'quạt',
                hint_vi: 'Thiết bị làm mát. (3 ký tự)',
                rationale_vi: 'Nếu cảm thấy lạnh, người ta sẽ yêu cầu tắt thiết bị làm mát như "fan" (quạt điện).',
                rationale_en: 'If one feels cold, they would ask to turn off a cooling device like an electric "fan".'
            },
            {
                type: 'fill-in-the-blank',
                question: '73. To ____ their nests, tailorbirds use their bills as needles.',
                correctAnswer: 'sew',
                correctAnswer_vi: 'khâu',
                hint_vi: 'Hành động dùng kim để nối các vật liệu lại với nhau. (3 ký tự)',
                rationale_vi: 'Việc "dùng mỏ như kim" (use their bills as needles) gợi ý đến hành động "sew" (khâu, may) để làm tổ.',
                rationale_en: 'The phrase "use their bills as needles" suggests the action of "sewing" to build their nests.'
            },
            {
                type: 'mc',
                question: '74. The house, ____ Shakespeare was born in, is open to the public.',
                options: [
                    { text: 'A. where', isCorrect: true },
                    { text: 'B. which', isCorrect: false },
                    { text: 'C. that', isCorrect: false },
                    { text: 'D. whom', isCorrect: false }
                ],
                correctAnswer: 'A. where',
                correctAnswer_vi: 'nơi',
                hint_vi: 'Trạng từ quan hệ chỉ nơi chốn.',
                rationale_vi: '"Where" được dùng làm trạng từ quan hệ để thay thế cho "in which" (trong đó), chỉ nơi chốn. Câu đầy đủ có thể là "The house in which Shakespeare was born...".',
                rationale_en: '"Where" is used as a relative adverb to replace "in which", indicating a place. The full sentence could be "The house in which Shakespeare was born...".'
            },
             {
                type: 'mc',
                question: '75. Choose a correct reply of the following expression: "Do you want this one or that one?"',
                options: [
                    { text: "A. I don't mind. You choose.", isCorrect: true },
                    { text: 'B. Yes, I want.', isCorrect: false },
                    { text: 'C. No, thanks.', isCorrect: false },
                    { text: 'D. Both are fine.', isCorrect: false }
                ],
                correctAnswer: "A. I don't mind. You choose.",
                correctAnswer_vi: 'Tôi không phiền. Bạn chọn đi.',
                hint_vi: 'Cách trả lời khi bạn không có sở thích cụ thể.',
                rationale_vi: 'Khi được hỏi lựa chọn giữa hai thứ và bạn không có ý kiến, "I don\'t mind. You choose" là một cách trả lời lịch sự và phổ biến.',
                rationale_en: 'When asked to choose between two things and you have no preference, "I don\'t mind. You choose" is a polite and common response.'
            },
            {
                type: 'mc',
                question: '76. Choose the word that has different stress pattern:',
                options: [
                    { text: 'A. con<u>sid</u>erate', isCorrect: false },
                    { text: 'B. ef<u>fec</u>tively', isCorrect: false },
                    { text: 'C. ef<u>fi</u>ciency', isCorrect: false },
                    { text: 'D. defores<u>ta</u>tion', isCorrect: true }
                ],
                correctAnswer: 'D. deforestation',
                correctAnswer_vi: 'deforestation',
                hint_vi: 'Tìm từ có trọng âm chính ở vị trí khác so với các từ còn lại.',
                rationale_vi: 'Trọng âm chính của các từ: considerate /kənˈsɪdərət/ (âm 2), effectively /ɪˈfektɪvli/ (âm 2), efficiency /ɪˈfɪʃnsi/ (âm 2), deforestation /diːˌfɒrɪˈsteɪʃn/ (âm 4). Do đó, "deforestation" khác biệt.',
                rationale_en: 'The primary stress is on: considerate /kənˈsɪdərət/ (2nd), effectively /ɪˈfektɪvli/ (2nd), efficiency /ɪˈfɪʃnsi/ (2nd), deforestation /diːˌfɒrɪˈsteɪʃn/ (4th). Therefore, "deforestation" is different.'
            },
            {
                type: 'rearrange',
                question: '77. during power cuts, there is a lot/ entertainment, such as books/ to be said for the oil lamp, the coal fire, and forms of/ or board games, which don’t have to be plugged in to work./ As we discover/',
                words: ['As we discover', 'during power cuts,', 'there is a lot', 'to be said for the oil lamp, the coal fire, and forms of', 'entertainment, such as books or board games, which don’t have to be plugged in to work.'],
                correctAnswer: 'As we discover during power cuts, there is a lot to be said for the oil lamp, the coal fire, and forms of entertainment, such as books or board games, which don’t have to be plugged in to work.',
                correctAnswer_vi: 'Như chúng ta phát hiện ra khi mất điện, có rất nhiều điều hay để nói về đèn dầu, lò than, và các hình thức giải trí, như sách hay trò chơi cờ bàn, những thứ không cần cắm điện để hoạt động.',
                hint_vi: 'Đây là một câu phức dài mô tả lợi ích của những thứ không dùng điện.',
                rationale_vi: 'Câu này bắt đầu bằng mệnh đề phụ "As we discover...". Cụm "there is a lot to be said for" có nghĩa là "có nhiều ưu điểm/điều tốt để nói về".',
                rationale_en: 'The sentence starts with the subordinate clause "As we discover...". The phrase "there is a lot to be said for" means "there are many advantages to".'
            },
            {
                type: 'fill-in-the-blank',
                question: '78. She profited ____ his vast experiences.',
                correctAnswer: 'from',
                correctAnswer_vi: 'từ',
                hint_vi: 'Cụm động từ "profit from". (4 ký tự)',
                rationale_vi: 'Cụm động từ "profit from something" có nghĩa là thu được lợi ích hoặc lợi nhuận từ điều gì đó.',
                rationale_en: 'The phrasal verb "profit from something" means to get an advantage or benefit from something.'
            },
            {
                type: 'mc',
                question: '79. I cannot help ____ anxious about the exam results.',
                options: [
                    { text: 'A. to feel', isCorrect: false },
                    { text: 'B. feel', isCorrect: false },
                    { text: 'C. feeling', isCorrect: true },
                    { text: 'D. felt', isCorrect: false }
                ],
                correctAnswer: 'C. feeling',
                correctAnswer_vi: 'cảm thấy',
                hint_vi: 'Cấu trúc "cannot help + V-ing".',
                rationale_vi: 'Cấu trúc "cannot help + V-ing" có nghĩa là không thể không làm gì, không thể nhịn được.',
                rationale_en: 'The structure "cannot help + V-ing" means that one cannot stop oneself from doing something.'
            },
            {
                type: 'mc',
                question: '80. The building ____ he lives ____ is very old.',
                options: [
                    { text: 'A. which / in', isCorrect: true },
                    { text: 'B. that / within', isCorrect: false },
                    { text: 'C. where / in', isCorrect: false },
                    { text: 'D. where / on', isCorrect: false }
                ],
                correctAnswer: 'A. which / in',
                correctAnswer_vi: 'mà / trong đó',
                hint_vi: 'Mệnh đề quan hệ với giới từ ở cuối.',
                rationale_vi: 'Ta có thể dùng "which" hoặc "that" để chỉ vật ("building") và giữ giới từ "in" ở cuối mệnh đề (which he lives in). Không được dùng "where" cùng với "in".',
                rationale_en: 'We can use "which" or "that" for a thing ("building") and keep the preposition "in" at the end of the clause (which he lives in). "where" cannot be used with "in".'
            },
            {
                type: 'fill-in-the-blank',
                question: '81. We have to suffer flood and hot weather ____ of uncontrollable forest destruction.',
                correctAnswer: 'because',
                correctAnswer_vi: 'bởi vì',
                hint_vi: 'Cụm từ "because of" + danh từ. (7 ký tự)',
                rationale_vi: 'Cụm giới từ "because of" được theo sau bởi một danh từ hoặc cụm danh từ để chỉ nguyên nhân.',
                rationale_en: 'The prepositional phrase "because of" is followed by a noun or noun phrase to indicate a cause.'
            },
            {
                type: 'mc',
                question: '82. War veterans were ____ through the streets to commemorate the victory.',
                options: [
                    { text: 'A. parade', isCorrect: false },
                    { text: 'B. parading', isCorrect: true },
                    { text: 'C. paraded', isCorrect: false },
                    { text: 'D. parades', isCorrect: false }
                ],
                correctAnswer: 'B. parading',
                correctAnswer_vi: 'diễu hành',
                hint_vi: 'Sử dụng thì quá khứ tiếp diễn.',
                rationale_vi: 'Hành động "diễu hành" (parading) đang diễn ra tại một thời điểm trong quá khứ. Cấu trúc thì quá khứ tiếp diễn: was/were + V-ing.',
                rationale_en: 'The action of "parading" was in progress at a time in the past. The past continuous tense structure is: was/were + V-ing.'
            },
            {
                type: 'rearrange',
                question: '83. Only/ the Water Park./ do I/ at weekends/ take my kid to/',
                words: ['Only', 'at weekends', 'do I', 'take my kid to', 'the Water Park.'],
                correctAnswer: 'Only at weekends do I take my kid to the Water Park.',
                correctAnswer_vi: 'Chỉ vào cuối tuần tôi mới đưa con tôi đến Công viên nước.',
                hint_vi: 'Cấu trúc đảo ngữ với "Only".',
                rationale_vi: 'Khi một câu bắt đầu bằng "Only + trạng từ/cụm giới từ", mệnh đề chính phải được đảo ngữ (trợ động từ + S + V).',
                rationale_en: 'When a sentence begins with "Only + adverb/prepositional phrase", the main clause must be inverted (auxiliary verb + S + V).'
            },
            {
                type: 'fill-in-the-blank',
                question: '84. During the war, we lost ____ with many relatives.',
                correctAnswer: 'touch',
                correctAnswer_vi: 'liên lạc',
                hint_vi: 'Thành ngữ "lose touch with". (5 ký tự)',
                rationale_vi: 'Thành ngữ "lose touch with someone" có nghĩa là mất liên lạc với ai đó.',
                rationale_en: 'The idiom "lose touch with someone" means to no longer be in contact with someone.'
            },
            {
                type: 'fill-in-the-blank',
                question: '85. How ____ runners joined the Boston Marathon in 1984?',
                correctAnswer: 'many',
                correctAnswer_vi: 'bao nhiêu',
                hint_vi: 'Hỏi về số lượng đếm được. (4 ký tự)',
                rationale_vi: '"How many" được dùng để hỏi về số lượng của danh từ đếm được ("runners").',
                rationale_en: '"How many" is used to ask about the quantity of a countable noun ("runners").'
            },
            {
                type: 'multimedia',
                question: '86. They went to the lake for ____.',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/OlympicExam/Data/ImageExam/2016/4/8/635957331241666364_Audio.mp3',
                options: [
                    { text: 'A. sailing', isCorrect: false },
                    { text: 'B. birdwatching', isCorrect: false },
                    { text: 'C. fishing', isCorrect: true },
                    { text: 'D. moving', isCorrect: false }
                ],
                correctAnswer: 'C. fishing',
                correctAnswer_vi: 'câu cá',
                hint_vi: 'Một hoạt động phổ biến ở hồ.',
                rationale_vi: '"Fishing" (câu cá) là một hoạt động giải trí phổ biến thường được thực hiện ở hồ.',
                rationale_en: '"Fishing" is a common recreational activity often done at a lake.'
            },
            {
                type: 'multimedia',
                question: '87. What will tourists watch the birds doing?',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/1/7/635246846608709404_Audio.mp3',
                options: [
                    { text: 'A. Nesting and dancing', isCorrect: false },
                    { text: 'B. Nesting and feeding', isCorrect: true },
                    { text: 'C. Flying and feeding', isCorrect: false },
                    { text: 'D. Flying and singing', isCorrect: false }
                ],
                correctAnswer: 'B. Nesting and feeding',
                correctAnswer_vi: 'Làm tổ và cho ăn',
                hint_vi: 'Lắng nghe hai hành động của chim.',
                rationale_vi: 'Xem chim làm tổ (nesting) và cho con ăn (feeding) là những hoạt động quan sát thiên nhiên phổ biến.',
                rationale_en: 'Watching birds nesting and feeding are common nature observation activities.'
            },
            {
                type: 'multimedia',
                question: "88. How much is an adult's ticket to visit the castle?",
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/4/4/636899772338975464_Audio.mp3',
                options: [
                    { text: 'A. It’s £3.', isCorrect: false },
                    { text: 'B. It’s £3.50.', isCorrect: false },
                    { text: 'C. It’s £8.', isCorrect: true },
                    { text: 'D. It’s £2.', isCorrect: false }
                ],
                correctAnswer: 'C. It’s £8.',
                correctAnswer_vi: 'Giá là 8 bảng.',
                hint_vi: 'Lắng nghe giá vé người lớn.',
                rationale_vi: 'Đây là một câu hỏi nghe hiểu điển hình về giá cả.',
                rationale_en: 'This is a typical listening comprehension question about prices.'
            },
            {
                type: 'mc',
                question: '89. The result is impossible to predict with any degree of ____.',
                options: [
                    { text: 'A. probability', isCorrect: false },
                    { text: 'B. insurance', isCorrect: false },
                    { text: 'C. assurance', isCorrect: false },
                    { text: 'D. certainty', isCorrect: true }
                ],
                correctAnswer: 'D. certainty',
                correctAnswer_vi: 'sự chắc chắn',
                hint_vi: 'Cụm từ "degree of certainty".',
                rationale_vi: 'Cụm từ "degree of certainty" có nghĩa là "mức độ chắc chắn".',
                rationale_en: 'The phrase "degree of certainty" means "the level of confidence in a prediction".'
            },
            {
                type: 'multimedia',
                question: '90. The hills ____.',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/4/14/636277586749348916_Audio.mp3',
                options: [
                    { text: 'A. are all along the coast', isCorrect: false },
                    { text: 'B. are 30 km long', isCorrect: false },
                    { text: 'C. have a semi-circular shape', isCorrect: true },
                    { text: 'D. are round', isCorrect: false }
                ],
                correctAnswer: 'C. have a semi-circular shape',
                correctAnswer_vi: 'có hình bán nguyệt',
                hint_vi: 'Lắng nghe mô tả hình dạng của những ngọn đồi.',
                rationale_vi: 'Câu này kiểm tra khả năng nghe hiểu mô tả về hình dạng địa lý.',
                rationale_en: 'This question tests the ability to understand descriptions of geographical shapes.'
            },
            {
                type: 'fill-in-the-blank',
                question: '91. The new power station produces vast amounts of ____.',
                correctAnswer: 'energy',
                correctAnswer_vi: 'năng lượng',
                hint_vi: 'Sản phẩm của một nhà máy điện. (6 ký tự)',
                rationale_vi: 'Một "power station" (nhà máy điện) được xây dựng để sản xuất "energy" (năng lượng) hoặc "electricity" (điện).',
                rationale_en: 'A "power station" is built to produce "energy" or "electricity".'
            },
            {
                type: 'mc',
                question: '92. Clarke comes from a city ____ located in the northern part of Germany.',
                options: [
                    { text: 'A. where', isCorrect: false },
                    { text: 'B. which', isCorrect: false },
                    { text: 'C. that is', isCorrect: true },
                    { text: 'D. where is', isCorrect: false }
                ],
                correctAnswer: 'C. that is',
                correctAnswer_vi: 'mà nó',
                hint_vi: 'Mệnh đề quan hệ chưa được rút gọn.',
                rationale_vi: 'Mệnh đề quan hệ đầy đủ là "which is located" hoặc "that is located". Dạng rút gọn sẽ là "located". Vì "that is" là một lựa chọn, nó là đáp án đúng.',
                rationale_en: 'The full relative clause is "which is located" or "that is located". The reduced form would be "located". Since "that is" is an option, it is the correct answer.'
            },
            {
                type: 'multimedia',
                question: '93. A ____ school is usually for pupils over 11 years old.',
                mediaType: 'audio',
                mediaSource: 'https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/1/9/635563956160349917_Audio.mp3',
                correctAnswer: 'secondary',
                correctAnswer_vi: 'trung học',
                hint_vi: 'Cấp học sau tiểu học. (9 ký tự)',
                rationale_vi: '"Secondary school" (trường trung học) là cấp học dành cho học sinh thường từ 11 tuổi trở lên.',
                rationale_en: '"Secondary school" is the level of education for pupils typically aged over 11.'
            },
            {
                type: 'rearrange',
                question: '94. the world./ I would travel/ around/ If I/ became rich,/',
                words: ['If I', 'became rich,', 'I would travel', 'around', 'the world.'],
                correctAnswer: 'If I became rich, I would travel around the world.',
                correctAnswer_vi: 'Nếu tôi trở nên giàu có, tôi sẽ đi du lịch vòng quanh thế giới.',
                hint_vi: 'Câu điều kiện loại 2.',
                rationale_vi: 'Đây là câu điều kiện loại 2, diễn tả một giả định không có thật ở hiện tại. Cấu trúc: If + S + V2/Ved, S + would + V.',
                rationale_en: 'This is a type 2 conditional sentence, expressing an unreal situation in the present. Structure: If + S + V2/Ved, S + would + V.'
            },
            {
                type: 'fill-in-the-blank',
                question: '95. The teacher encouraged me ____ join the football team.',
                correctAnswer: 'to',
                correctAnswer_vi: 'để',
                hint_vi: 'Cấu trúc "encourage somebody to do something". (2 ký tự)',
                rationale_vi: 'Sau động từ "encourage" + tân ngữ, ta dùng động từ nguyên thể có "to".',
                rationale_en: 'After the verb "encourage" + object, we use a to-infinitive.'
            },
            {
                type: 'mc',
                question: '96. The past participle of "slide" is "____".',
                options: [
                    { text: 'A. slided', isCorrect: false },
                    { text: 'B. slid', isCorrect: true },
                    { text: 'C. slode', isCorrect: false },
                    { text: 'D. slidden', isCorrect: false }
                ],
                correctAnswer: 'B. slid',
                correctAnswer_vi: 'slid',
                hint_vi: 'Đây là một động từ bất quy tắc.',
                rationale_vi: '"Slide" là một động từ bất quy tắc. Dạng quá khứ và quá khứ phân từ của nó đều là "slid".',
                rationale_en: '"Slide" is an irregular verb. Its past simple and past participle forms are both "slid".'
            },
            {
                type: 'rearrange',
                question: '97. in the/ 1,000 visitors/ botanical grounds/ at one time./ No more than/ will be allowed',
                words: ['No more than', '1,000 visitors', 'will be allowed', 'in the botanical grounds', 'at one time.'],
                correctAnswer: 'No more than 1,000 visitors will be allowed in the botanical grounds at one time.',
                correctAnswer_vi: 'Không quá 1.000 du khách sẽ được phép vào khu vườn bách thảo cùng một lúc.',
                hint_vi: 'Câu bị động ở thì tương lai.',
                rationale_vi: 'Câu này sử dụng cấu trúc bị động ở thì tương lai đơn (will be + P2) để thông báo một quy định.',
                rationale_en: 'This sentence uses the passive voice in the simple future tense (will be + P2) to announce a regulation.'
            },
            {
                type: 'rearrange',
                question: '98. and minerals./ should supply/ vitamins/ A healthy diet/ all necessary/',
                words: ['A healthy diet', 'should supply', 'all necessary', 'vitamins', 'and minerals.'],
                correctAnswer: 'A healthy diet should supply all necessary vitamins and minerals.',
                correctAnswer_vi: 'Một chế độ ăn uống lành mạnh nên cung cấp tất cả các vitamin và khoáng chất cần thiết.',
                hint_vi: 'Câu khuyên bảo với "should".',
                rationale_vi: 'Cấu trúc câu cơ bản: Subject (A healthy diet) + Modal Verb (should) + Verb (supply) + Object (vitamins and minerals).',
                rationale_en: 'Basic sentence structure: Subject (A healthy diet) + Modal Verb (should) + Verb (supply) + Object (vitamins and minerals).'
            },
            {
                type: 'fill-in-the-blank',
                question: '99. Mr. Brown is looking ____ his glasses. He thinks he left them behind in the office yesterday.',
                correctAnswer: 'for',
                correctAnswer_vi: 'tìm kiếm',
                hint_vi: 'Cụm động từ có nghĩa là "tìm kiếm". (3 ký tự)',
                rationale_vi: 'Cụm động từ "look for" có nghĩa là tìm kiếm một cái gì đó.',
                rationale_en: 'The phrasal verb "look for" means to search for something.'
            }
        ];
        
        // --- Component: MediaDisplay (Helper for Image/Audio rendering) ---
        const MediaDisplay = ({ question, showMessage }) => {
            if (question.mediaType === 'image') {
                return (
                    <div className="w-full p-4 bg-gray-100 rounded-xl mb-4 text-center border-2 border-dashed border-gray-300">
                        <p className="text-blue-600 font-bold mb-2">🖼️ Câu hỏi kèm Hình ảnh</p>
                        <img 
                            src={question.mediaSource}
                            alt={`Hình ảnh IOE: ${question.imagePrompt || 'Chủ đề câu hỏi'}`} 
                            className="w-full max-w-xs mx-auto rounded-lg shadow-md border-2 border-gray-300"
                            crossOrigin="anonymous"
                            referrerPolicy="no-referrer"
                            onError={(e) => { 
                                e.target.onerror = null; 
                                e.target.src = `https://placehold.co/566x320/FF0000/FFFFFF?text=L%E1%BB%97I+T%E1%BA%A2I+%E1%BA%A2NH+(CORS)`; 
                                showMessage('Lỗi tải ảnh: File media có thể bị chặn bởi trình duyệt.', 'error');
                            }}
                        />
                        <p className="text-xs text-gray-500 mt-2 break-all">Link gốc: {question.mediaSource}</p>
                        {question.imagePrompt && <p className="text-sm text-blue-600 mt-2 font-medium">Gợi ý nội dung: {question.imagePrompt}</p>}
                    </div>
                );
            }

            if (question.mediaType === 'audio') {
                return (
                    <div className="w-full p-4 bg-gray-100 rounded-xl mb-4 text-center border-2 border-dashed border-gray-300">
                        <p className="text-blue-600 font-bold mb-2">🔊 Câu hỏi Nghe (Bấm Play)</p>
                        <audio 
                            controls
                            src={question.mediaSource}
                            className="w-full max-w-sm mx-auto my-2"
                            crossOrigin="anonymous"
                            referrerPolicy="no-referrer"
                            onError={() => {
                                showMessage('Lỗi tải Audio: File media có thể bị chặn.', 'error');
                            }}
                        >
                            <source src={question.mediaSource} type="audio/mp3" />
                            Trình duyệt của bạn không hỗ trợ phần tử audio.
                        </audio>
                        <p className="text-xs text-gray-500 mt-2 break-all">Link gốc: {question.mediaSource}</p>
                    </div>
                );
            }
            return null;
        }

        // --- Component: ProgressBar.tsx ---
        const ProgressBar = ({ percentage }) => {
            return (
                <div className="w-full h-2 bg-blue-100 rounded-full mt-4 overflow-hidden">
                    <div
                        className="h-full bg-blue-500 transition-all duration-500 ease-in-out"
                        style={{ width: `${percentage}%` }}
                    ></div>
                </div>
            );
        };
        
        // --- Component: MessageBox.tsx ---
        const MessageBox = ({ message, type }) => {
            const [visible, setVisible] = React.useState(false);

            React.useEffect(() => {
                if (message) {
                    setVisible(true);
                    const timer = setTimeout(() => {
                        setVisible(false);
                    }, 2700);
                    return () => clearTimeout(timer);
                } else {
                    setVisible(false);
                }
            }, [message, type]);

            const baseClasses = "fixed top-4 left-1/2 -translate-x-1/2 p-4 rounded-xl shadow-xl text-center font-bold text-lg z-50 transition-all duration-300 transform";
            
            const typeClasses = {
                success: 'bg-green-100 border border-green-500 text-green-800',
                error: 'bg-red-100 border border-red-500 text-red-800',
                info: 'bg-yellow-100 border border-yellow-500 text-yellow-800',
            };

            const visibilityClasses = visible ? 'opacity-100 scale-100' : 'opacity-0 scale-90 pointer-events-none';

            return (
                <div className={`${baseClasses} ${typeClasses[type]} ${visibilityClasses}`}>
                    {message}
                </div>
            );
        };
        
        // --- Component: RationaleBox.tsx ---
        const RationaleBox = ({ question, isCorrect, submittedAnswer }) => {
            const boxClasses = `mt-6 p-4 rounded-xl border transition duration-300 fade-in border-l-4 ${
                isCorrect ? 'bg-green-100 border-green-600' : 'bg-red-100 border-red-600'
            }`;
            
            const submittedAnswerDisplay = () => {
                const isFillIn = question.type === 'fill-in-the-blank' || (question.type === 'multimedia' && !question.options);
                
                if(isCorrect && !isFillIn) return null;
                
                return (
                    <>
                        <strong className="text-gray-700">
                           Bạn đã chọn/Điền:
                        </strong>
                        <span className="text-red-700 font-medium break-words"> {submittedAnswer}</span>
                        <br/>
                    </>
                );
            }

            return (
                <div className={boxClasses}>
                    <p className="font-bold text-lg mb-2 text-blue-700">Giải thích:</p>
                    <div className="text-gray-700 space-y-1">
                        {!isCorrect && submittedAnswerDisplay()}
                        <p><strong>Đáp án đúng:</strong> <span className="text-green-800 font-semibold">{question.correctAnswer}</span></p>
                        
                        {question.correctAnswer_vi && (
                            <p><strong>Dịch nghĩa:</strong> <span className="text-green-600 font-medium">{question.correctAnswer_vi}</span></p>
                        )}
                        <p className="pt-2 border-t border-gray-300 mt-2">{question.rationale_vi || 'Không có giải thích chi tiết.'}</p>
                    </div>
                </div>
            );
        };

        // --- Component: FillInTheBlankQuestion.tsx ---
        const FillInTheBlankQuestion = ({ question, isAnswered, onSubmit, showMessage, questionIndex }) => {
            const [inputValue, setInputValue] = React.useState('');
            const inputRef = React.useRef(null);

            React.useEffect(() => {
                setInputValue('');
                if (inputRef.current && !isAnswered) {
                    inputRef.current.focus();
                }
            }, [question, isAnswered]);

            const handleSubmitClick = () => {
                const trimmedInput = inputValue.trim();
                if (trimmedInput === '') {
                    showMessage('Vui lòng điền câu trả lời của bạn!', 'info');
                    return;
                }
                const isCorrect = trimmedInput.toLowerCase() === question.correctAnswer.toLowerCase();
                onSubmit(trimmedInput, isCorrect);
            };
            
            const questionTextParts = React.useMemo(() => {
                let text = question.question.replace(/^\d+\.\s*/, '');
                
                const markers = ['____', '________', '__________', '___________', '_________', '_______', '______', '_____', '___', '__', '_'];

                for (const marker of markers) {
                    if (text.includes(marker)) {
                        const parts = text.split(marker);
                        return [parts[0], parts.slice(1).join(marker)];
                    }
                }
                 // Handle partial words like `c__se`
                const partialMatch = text.match(/(.*)__+(.*)/) || text.match(/(.*)\_+(.*)/);
                if (partialMatch) {
                    return [partialMatch[1], partialMatch[2]];
                }

                return [text, '']; 
            }, [question.question]);
            
            let inputClasses = 'inline-block mx-2 p-2 border-2 rounded-lg text-lg text-center shadow-sm transition duration-200 align-baseline w-48 font-mono';
            if (isAnswered) {
                const isSubmissionCorrect = inputValue.trim().toLowerCase() === question.correctAnswer.toLowerCase();
                inputClasses += isSubmissionCorrect ? ' border-green-500 bg-green-50 font-bold' : ' border-red-500 bg-red-50 font-bold';
            } else {
                inputClasses += ' border-gray-300 focus:border-blue-500';
            }

            const inputWidthStyle = {
                width: `${Math.max(8, question.correctAnswer.length * 1.5)}rem`, 
                maxWidth: '100%',
            };


            return (
                <div className="space-y-4">
                     {question.mediaType && <MediaDisplay question={question} showMessage={showMessage} />}
                    <div className="text-xl sm:text-2xl font-semibold mb-6 leading-relaxed text-center flex justify-center items-center flex-wrap">
                        <span className="mr-2">{questionIndex + 1}.</span>
                        {questionTextParts[0] && <span>{questionTextParts[0]}</span>}
                        <input
                            ref={inputRef}
                            type="text"
                            value={inputValue}
                            onChange={(e) => setInputValue(e.target.value)}
                            disabled={isAnswered}
                            placeholder={isAnswered ? question.correctAnswer : ""}
                            className={inputClasses}
                            style={inputWidthStyle}
                            onKeyPress={(e) => e.key === 'Enter' && !isAnswered && handleSubmitClick()}
                            aria-label="Fill in the blank"
                        />
                        {questionTextParts[1] && <span>{questionTextParts[1]}</span>}
                    </div>
                    <button
                        onClick={handleSubmitClick}
                        disabled={isAnswered}
                        className="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md transition duration-300 hover:bg-green-700 mt-4 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98"
                    >
                        Kiểm Tra
                    </button>
                </div>
            );
        };
        
        // --- Component: MultipleChoiceQuestion.tsx ---
        const MultipleChoiceQuestion = ({ question, isAnswered, onSubmit, showMessage, questionIndex }) => {
            const [selectedIndex, setSelectedIndex] = React.useState(null);

            React.useEffect(() => {
                setSelectedIndex(null);
            }, [question]);

            const handleSubmitClick = () => {
                if (selectedIndex === null) {
                    showMessage('Vui lòng chọn một đáp án!', 'info');
                    return;
                }
                const selectedOption = question.options[selectedIndex];
                onSubmit(selectedOption.text, selectedOption.isCorrect);
            };

            return (
                <>
                    {question.mediaType && <MediaDisplay question={question} showMessage={showMessage} />}
                    
                    <h3
                        className="text-xl sm:text-2xl font-semibold mb-6 leading-relaxed"
                        dangerouslySetInnerHTML={{ __html: `${questionIndex + 1}. ${question.question.replace(/^\d+\.\s*/, '')}` }}
                    />
                    <div className="space-y-4">
                        <div className="space-y-3">
                            {question.options.map((option, index) => {
                                const isSelected = selectedIndex === index;
                                let labelClasses = "block p-4 border-2 rounded-xl shadow-md text-lg transition duration-200";

                                if (isAnswered) {
                                    labelClasses += " cursor-default";
                                    if (option.isCorrect) {
                                        labelClasses += " bg-green-100 border-green-500 font-bold";
                                    } else if (isSelected) {
                                        labelClasses += " bg-red-100 border-red-500 font-bold";
                                    } else {
                                        labelClasses += " border-gray-200 opacity-60";
                                    }
                                } else {
                                    labelClasses += " cursor-pointer hover:bg-blue-50 hover:border-blue-300";
                                    if(isSelected) {
                                        labelClasses += " bg-blue-100 border-blue-500";
                                    } else {
                                        labelClasses += " border-gray-200";
                                    }
                                }

                                return (
                                    <div key={index} className="relative">
                                        <input
                                            type="radio"
                                            id={`option-${questionIndex}-${index}`}
                                            name={`mc-option-${questionIndex}`}
                                            value={index}
                                            className="hidden"
                                            checked={isSelected}
                                            onChange={() => setSelectedIndex(index)}
                                            disabled={isAnswered}
                                        />
                                        <label htmlFor={`option-${questionIndex}-${index}`} className={labelClasses} dangerouslySetInnerHTML={{ __html: option.text }}></label>
                                    </div>
                                );
                            })}
                        </div>
                        <button
                            onClick={handleSubmitClick}
                            disabled={isAnswered}
                            className="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md transition duration-300 hover:bg-green-700 mt-4 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98"
                        >
                            Kiểm Tra
                        </button>
                    </div>
                </>
            );
        };
        
        // --- Component: RearrangeQuestion.tsx ---
        const WordBlock = ({ word, onClick, isSource, isAnswered }) => {
            const baseClasses = 'word-block px-3 py-2 text-base sm:text-lg font-semibold rounded-lg shadow-sm transition-all duration-150 break-words transform active:scale-95';
            const sourceClasses = isSource ? 'bg-blue-100 text-blue-800 hover:bg-blue-200' : 'bg-gray-100 text-gray-800 border-b-2 border-gray-300';
            const disabledClasses = 'opacity-60 cursor-default shadow-inner';
            const interactiveClasses = 'cursor-pointer';

            return (
                <span
                    onClick={!isAnswered ? onClick : undefined}
                    className={`${baseClasses} ${sourceClasses} ${isAnswered ? disabledClasses : interactiveClasses}`}
                >
                    {word.text}
                </span>
            );
        };

        const RearrangeQuestion = ({ question, isAnswered, onSubmit, showMessage, questionIndex, isCorrect }) => {
            const [sentenceWords, setSentenceWords] = React.useState([]);
            
            const initialSourceWords = React.useMemo(() => {
                return [...question.words]
                    .map((text) => ({ id: crypto.randomUUID(), text })) 
                    .sort(() => Math.random() - 0.5);
            }, [question]);

            const [sourceWords, setSourceWords] = React.useState(initialSourceWords);

            React.useEffect(() => {
                setSourceWords(initialSourceWords);
                setSentenceWords([]);
            }, [initialSourceWords]);

            const handleSelectWord = (word) => {
                setSourceWords(prev => prev.filter(w => w.id !== word.id));
                setSentenceWords(prev => [...prev, word]);
            };

            const handleReturnWord = (word) => {
                setSentenceWords(prev => prev.filter(w => w.id !== word.id));
                setSourceWords(prev => [...prev, word].sort((a, b) => initialSourceWords.findIndex(sw => sw.id === a.id) - initialSourceWords.findIndex(sw => sw.id === b.id)));
            };

            const handleSubmitClick = () => {
                if (sentenceWords.length === 0) {
                    showMessage('Vui lòng sắp xếp các từ!', 'info');
                    return;
                }
                
                const submitted = sentenceWords.map(w => w.text).join(' ').replace(/\s+([.,?!])/g, '$1').trim();
                const normalize = (str) => str.replace(/’/g, "'").replace(/[.,?!]/g, '').replace(/\s+/g, ' ').toLowerCase().trim();
                
                const isCorrectResult = normalize(submitted) === normalize(question.correctAnswer);
                onSubmit(submitted, isCorrectResult);
            };

            return (
                <>
                    <h3
                        className="text-xl sm:text-2xl font-semibold mb-6 leading-relaxed"
                        dangerouslySetInnerHTML={{ __html: `${questionIndex + 1}. ${question.question.replace(/^\d+\.\s*/, '')}` }}
                    />
                    <div className="space-y-4">
                        <div className={`min-h-[60px] p-3 border-2 rounded-xl shadow-inner flex flex-wrap gap-2 items-center transition duration-300 ${isAnswered ? (isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-blue-300 bg-blue-50 border-dashed'}`}>
                            {sentenceWords.length === 0 && !isAnswered ? (
                                <span className="text-gray-500 italic text-sm">Chạm vào các từ bên dưới để xây dựng câu trả lời...</span>
                            ) : (
                                sentenceWords.map(word => (
                                    <WordBlock key={word.id} word={word} onClick={() => handleReturnWord(word)} isSource={false} isAnswered={isAnswered} />
                                ))
                            )}
                        </div>
                        
                        <div className="min-h-[100px] p-4 bg-gray-100 rounded-xl shadow-md flex flex-wrap gap-2 items-center border border-gray-200">
                            {sourceWords.map(word => (
                                <WordBlock key={word.id} word={word} onClick={() => handleSelectWord(word)} isSource={true} isAnswered={isAnswered} />
                            ))}
                        </div>
                        <button
                            onClick={handleSubmitClick}
                            disabled={isAnswered}
                            className="w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md transition duration-300 hover:bg-green-700 mt-4 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98"
                        >
                            Kiểm Tra
                        </button>
                    </div>
                </>
            );
        };
        
        // --- Component: StartScreen.tsx ---
        const StartScreen = ({ onStart, totalQuestions }) => {
            const [name, setName] = React.useState('');

            const handleStart = () => {
                if (name.trim()) {
                    onStart(name.trim());
                }
            };

            const isButtonDisabled = name.trim() === '';

            return (
                <div className="fade-in text-center p-4">
                    <header className="mb-8">
                        <h1 className="text-3xl sm:text-4xl font-extrabold text-blue-600 mb-2">BỘ ĐỀ ÔN IOE K9 SỐ: 01.2</h1>
                        <p className="text-lg text-gray-500">Bộ đề luyện thi IOE dành cho khối 9</p>
                    </header>
                    <div className="max-w-md mx-auto bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                        <h2 className="text-2xl font-semibold mb-4 text-gray-700">Chào mừng bạn!</h2>
                        <p className="text-gray-600 mb-6">Mỗi câu trả lời đúng được cộng 10 điểm. Bài thi có {totalQuestions} câu.</p>
                        <div className="space-y-4">
                            <label htmlFor="player-name" className="block text-sm font-medium text-gray-700 text-left">Nhập tên của bạn để bắt đầu:</label>
                            <input
                                type="text"
                                id="player-name"
                                placeholder="Tên người chơi"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-lg shadow-sm transition duration-150"
                                maxLength={50}
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && !isButtonDisabled && handleStart()}
                            />
                            <button
                                onClick={handleStart}
                                disabled={isButtonDisabled}
                                className="w-full py-3 px-4 bg-blue-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-xl active:scale-98"
                            >
                                Bắt Đầu
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- Component: EndScreen.tsx ---
        const EndScreen = ({ playerName, score, totalQuestions, onRestart, onReview }) => {
            const maxScore = totalQuestions * 10;
            const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
            
            let encouragement = "Cố gắng hơn ở lần sau nhé!";
            if (percentage >= 90) {
                encouragement = "Xuất sắc! Bạn thật sự là một chuyên gia!";
            } else if (percentage >= 70) {
                encouragement = "Làm tốt lắm! Chỉ cần cố gắng thêm một chút nữa thôi.";
            } else if (percentage >= 50) {
                encouragement = "Khá tốt! Hãy tiếp tục ôn luyện nhé.";
            }

            return (
                <div className="text-center fade-in p-4">
                    <h2 className="text-3xl font-bold mb-2 text-green-600">🎉 Hoàn Thành! 🎉</h2>
                    <p className="text-xl text-gray-700 mb-4">
                        Chúc mừng, <span className="font-extrabold text-blue-600">{playerName}</span>!
                    </p>
                     <p className="text-lg text-gray-600 mb-6">{encouragement}</p>
                    <div className="bg-white p-8 rounded-xl shadow-lg inline-block border border-gray-100">
                        <p className="text-2xl font-semibold mb-8 text-gray-700">Điểm số cuối cùng:</p>
                        <p className={`text-6xl font-black mb-10 text-blue-700`}>
                            {score} / {maxScore}
                        </p>
                    </div>
                    <div className="mt-8 flex flex-col sm:flex-row justify-center items-center gap-4">
                        {onReview && (
                             <button
                                onClick={onReview}
                                className="py-3 px-6 bg-yellow-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-yellow-600 text-lg active:scale-98"
                            >
                                Xem lại câu sai
                            </button>
                        )}
                        <button
                            onClick={onRestart}
                            className="py-3 px-6 bg-blue-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-blue-600 text-lg active:scale-98"
                        >
                            Làm lại bài thi
                        </button>
                    </div>
                </div>
            );
        };

        // --- Component: ReviewScreen.tsx ---
        const ReviewScreen = ({ incorrectAnswers, onBack }) => {
            return (
                <div className="fade-in">
                    <header className="text-center mb-8">
                        <h1 className="text-3xl sm:text-4xl font-extrabold text-yellow-600 mb-2">Ôn tập các câu sai</h1>
                    </header>
                    <div className="space-y-8">
                        {incorrectAnswers.map(({ question, submittedAnswer }, index) => (
                            <div key={index} className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                                <h3 className="text-xl sm:text-2xl font-semibold mb-4 leading-relaxed"
                                    dangerouslySetInnerHTML={{ __html: `${index + 1}. ${question.question.replace(/^\d+\.\s*/, '')}` }}
                                />
                                {question.mediaType && <MediaDisplay question={question} showMessage={() => {}} />}
                                <RationaleBox question={question} isCorrect={false} submittedAnswer={submittedAnswer} />
                            </div>
                        ))}
                    </div>
                    <div className="mt-8 text-center">
                        <button
                            onClick={onBack}
                            className="py-3 px-6 bg-blue-500 text-white font-bold rounded-xl shadow-lg transition duration-300 hover:bg-blue-600 text-lg active:scale-98"
                        >
                            Quay lại màn hình điểm
                        </button>
                    </div>
                </div>
            );
        };
        
        // --- Component: QuizScreen.tsx ---
        const QuizScreen = ({ playerName, onEnd, totalQuestions, questionSet }) => {
            const [currentQuestionIndex, setCurrentQuestionIndex] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [isAnswered, setIsAnswered] = React.useState(false);
            const [isCorrect, setIsCorrect] = React.useState(false);
            const [submittedAnswer, setSubmittedAnswer] = React.useState('');
            const [isHintVisible, setIsHintVisible] = React.useState(false);
            const [message, setMessage] = React.useState(null);
            const incorrectAnswersRef = React.useRef([]);

            const currentQuestion = questionSet[currentQuestionIndex];

            React.useEffect(() => {
                incorrectAnswersRef.current = [];
            }, [questionSet]);

             React.useEffect(() => {
                setIsAnswered(false);
                setIsCorrect(false);
                setSubmittedAnswer('');
                setIsHintVisible(false);
                setMessage(null);
            }, [currentQuestionIndex]);
            
            const showMessage = (text, type) => {
                setMessage({ text, type });
            };

            const handleSubmit = (answer, isAnswerCorrect) => {
                if (isAnswered) return;
                
                setIsAnswered(true);
                setSubmittedAnswer(answer);
                setIsCorrect(isAnswerCorrect);

                if (isAnswerCorrect) {
                    setScore(prev => prev + 10);
                    showMessage('CHÍNH XÁC! +10 điểm', 'success');
                } else {
                    showMessage('SAI RỒI! Hãy xem lại nhé.', 'error');
                    incorrectAnswersRef.current.push({ question: currentQuestion, submittedAnswer: answer });
                }
            };

            const handleNext = () => {
                if (currentQuestionIndex < totalQuestions - 1) {
                    setCurrentQuestionIndex(prev => prev + 1);
                } else {
                    onEnd(score, incorrectAnswersRef.current);
                }
            };

            if (!currentQuestion) {
                return <div className="text-center p-8">Đang tải câu hỏi...</div>;
            }

            const progressPercentage = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            
            const renderQuestionComponent = () => {
                const commonProps = {
                    question: currentQuestion,
                    isAnswered,
                    onSubmit: handleSubmit,
                    showMessage,
                    questionIndex: currentQuestionIndex,
                    isCorrect: isCorrect, 
                };

                if (currentQuestion.type === 'rearrange') {
                    return <RearrangeQuestion {...commonProps} />;
                }
                if (currentQuestion.type === 'mc' || (currentQuestion.type === 'multimedia' && currentQuestion.options)) {
                    return <MultipleChoiceQuestion {...commonProps} />;
                }
                if (currentQuestion.type === 'fill-in-the-blank' || (currentQuestion.type === 'multimedia' && !currentQuestion.options)) {
                    return <FillInTheBlankQuestion {...commonProps} />;
                }
                
                return <div className="text-red-500">Lỗi: Loại câu hỏi không xác định.</div>;
            };

            return (
                <div className="fade-in">
                    {message && <MessageBox message={message.text} type={message.type} />}
                    <header className="text-center mb-8">
                        <h1 className="text-3xl sm:text-4xl font-extrabold text-blue-600 mb-2">BỘ ĐỀ ÔN IOE K9 SỐ: 01.2</h1>
                        <ProgressBar percentage={progressPercentage} />
                    </header>

                    <div className="flex justify-between items-center mb-6 py-2 px-4 bg-blue-50 rounded-xl shadow-inner border border-blue-100">
                        <p className="text-sm sm:text-base font-medium text-blue-800">Người chơi: <span className="font-bold">{playerName}</span></p>
                        <p className="text-sm sm:text-base font-medium text-blue-800">Điểm: <span className="text-xl font-extrabold text-red-600">{score}</span></p>
                        <p className="text-sm sm:text-base font-medium text-blue-800">Câu: <span className="font-bold">{currentQuestionIndex + 1}/{totalQuestions}</span></p>
                    </div>

                    <div className="mb-8">
                        {renderQuestionComponent()}
                    </div>

                    <div className="mt-8 border-t pt-6 flex justify-between items-center flex-wrap gap-4">
                        <div className="relative">
                            <button
                                className="bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 hover:bg-yellow-600 active:scale-95"
                                onMouseEnter={() => setIsHintVisible(true)}
                                onMouseLeave={() => setIsHintVisible(false)}
                                onTouchStart={() => setIsHintVisible(true)}
                                onTouchEnd={() => setIsHintVisible(false)}
                            >
                                Gợi ý
                            </button>
                            <div className={`absolute bottom-full mb-2 w-max max-w-[90vw] sm:max-w-sm p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-xl shadow-lg transition-all duration-300 transform origin-bottom-left ${isHintVisible ? 'opacity-100 scale-100' : 'opacity-0 scale-90 pointer-events-none'}`}>
                                <p className="font-semibold text-yellow-800">Gợi ý:</p>
                                <p className="text-yellow-700">{currentQuestion.hint_vi || 'Không có gợi ý.'}</p>
                            </div>
                        </div>
                        
                        <button onClick={handleNext} disabled={!isAnswered} className="flex-grow py-3 px-4 bg-blue-500 text-white font-bold rounded-xl shadow-xl transition duration-300 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed active:scale-98">
                            {currentQuestionIndex === totalQuestions - 1 ? 'Hoàn thành' : 'Câu tiếp theo'}
                        </button>
                    </div>

                    {isAnswered && (
                        <RationaleBox question={currentQuestion} isCorrect={isCorrect} submittedAnswer={submittedAnswer} />
                    )}
                </div>
            );
        };
        
        // --- Component: App.tsx ---
        const App = () => {
            const [gameState, setGameState] = React.useState('start');
            const [playerName, setPlayerName] = React.useState('');
            const [score, setScore] = React.useState(0);
            const [shuffledQuestions, setShuffledQuestions] = React.useState([]);
            const [incorrectAnswers, setIncorrectAnswers] = React.useState([]);

            React.useEffect(() => {
                const array = [...questions];
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                setShuffledQuestions(array);
            }, []);

            const handleStartQuiz = (name) => {
                setPlayerName(name);
                setScore(0);
                setIncorrectAnswers([]);
                setGameState('quiz');
            };

            const handleEndQuiz = (finalScore, mistakes) => {
                setScore(finalScore);
                setIncorrectAnswers(mistakes);
                setGameState('end');
            };
            
            const handleRestartQuiz = () => {
                 const array = [...questions];
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                setShuffledQuestions(array);
                setGameState('start');
            };

            const handleReview = () => {
                setGameState('review');
            };

             const handleBackToEndScreen = () => {
                setGameState('end');
            };

            const renderContent = () => {
                switch (gameState) {
                    case 'quiz':
                        return <QuizScreen 
                                    playerName={playerName} 
                                    onEnd={handleEndQuiz} 
                                    totalQuestions={shuffledQuestions.length}
                                    questionSet={shuffledQuestions}
                                />;
                    case 'end':
                        return <EndScreen 
                                    playerName={playerName} 
                                    score={score} 
                                    totalQuestions={shuffledQuestions.length}
                                    onRestart={handleRestartQuiz} 
                                    onReview={incorrectAnswers.length > 0 ? handleReview : null}
                                />;
                    case 'review':
                        return <ReviewScreen 
                                    incorrectAnswers={incorrectAnswers}
                                    onBack={handleBackToEndScreen}
                                />;
                    default:
                         return <StartScreen onStart={handleStartQuiz} totalQuestions={questions.length} />;
                }
            };

            return (
                <div className="p-4 sm:p-8 flex justify-center items-start min-h-screen">
                    <div className="w-full max-w-3xl bg-white rounded-xl shadow-2xl p-6 sm:p-8 md:p-10 border border-gray-100 min-h-[80vh]">
                        {renderContent()}
                    </div>
                </div>
            );
        };
        
        // --- Entry point from index.tsx ---
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>
